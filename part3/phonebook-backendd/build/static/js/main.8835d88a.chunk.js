(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),u=n.n(a),r=n(14),c=n.n(r),o=n(4),s=n(2),l=function(e){var t=e.persons,n=e.deleteNumber;return t.map((function(e,t){return u.a.createElement("p",{key:t,className:"person"},e.name," ",e.number," ",u.a.createElement("button",{onClick:function(){n(e.id)}},"delete")," ")}))},i=function(e){var t=e.AddNumber,n=e.newName,a=e.setNewName,r=e.newNumber,c=e.setNumber;return u.a.createElement("form",{onSubmit:t},u.a.createElement("div",null,"name: ",u.a.createElement("input",{value:n,onChange:function(e){a(e.target.value)}})),u.a.createElement("div",null,"number: ",u.a.createElement("input",{value:r,onChange:function(e){return c(e.target.value)}})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add")))},m=function(e){var t=e.Filter,n=e.setPerson,a=e.Person;return u.a.createElement("div",null,"search for people",u.a.createElement("input",{value:a,onChange:function(e){n(e.target.value),t(e.target.value)}}))},f=n(3),d=n.n(f),p="/api/persons",b=function(){return d.a.get(p).then((function(e){return e.data}))},g=function(e){return d.a.delete("".concat(p,"/").concat(e)).then((function(e){}))},h=function(e,t){return d.a.put("".concat(p,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){return d.a.post("".concat(p),e).then((function(e){return e.data}))},N=function(e){var t=e.message,n=e.type;return null===t?u.a.createElement(u.a.Fragment,null):"succ"===n?u.a.createElement("div",{className:"success"},t):u.a.createElement("div",{className:"error"},t)},v=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),f=Object(s.a)(c,2),d=f[0],p=f[1],v=Object(a.useState)(""),w=Object(s.a)(v,2),y=w[0],O=w[1],j=Object(a.useState)(""),C=Object(s.a)(j,2),k=C[0],S=C[1],L=Object(a.useState)(""),P=Object(s.a)(L,2),T=P[0],A=P[1],F=Object(a.useState)({message:null,type:null}),x=Object(s.a)(F,2),J=x[0],B=x[1];Object(a.useEffect)((function(){b().then((function(e){r(e),p(e)}))}),[]);return u.a.createElement("div",null,u.a.createElement(N,{message:J.message,type:J.type}),u.a.createElement("h2",{className:"titles"},"Phonebook"),u.a.createElement(m,{Filter:function(e){p(""===e?n:n.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.toLowerCase())})))},setPerson:A,Person:T}),u.a.createElement("h2",{className:"titles"},"Add number"),u.a.createElement(i,{AddNumber:function(e){if(e.preventDefault(),void 0===d.find((function(e){return e.name.toLowerCase()===y.toLowerCase()})))E({name:y,number:k}).then((function(e){console.log(e),p(d.concat(e)),r(n.concat(e)),B({message:"Number was succesfully added",type:"succ"}),setTimeout((function(){B({message:null,type:null})}),5e3)})).catch((function(e){B({message:e.response.data.message,type:"err"}),setTimeout((function(){B({message:null,type:null})}),5e3)}));else if(window.confirm("".concat(y," is already in database do you want to update a number ?"))){var t=d.find((function(e){return e.name.toLowerCase()===y.toLowerCase()})),a=Object(o.a)(Object(o.a)({},t),{},{number:k});h(t.id,a).then((function(e){B({message:"Number was succesfully changed",type:"succ"}),setTimeout((function(){B({message:null,type:null})}),5e3),r(n.map((function(t){return t.id===e.id?e:t}))),p(d.map((function(t){return t.id===e.id?e:t})))})).catch((function(e){B({message:e.response.data,type:"err"}),setTimeout((function(){B({message:null,type:null})}),5e3),500===e.response.status&&(r(n.filter((function(e){return e.id!==a.id}))),p(d.filter((function(e){return e.id!==a.id}))))}))}O(""),S("")},newName:y,setNewName:O,newNumber:k,setNumber:S}),u.a.createElement("h2",{className:"titles"},"Numbers"),u.a.createElement(l,{persons:d,deleteNumber:function(e){window.confirm("You really want to delete this phone number ?! ")&&(g(e).then((function(e){B({message:"Number was succesfully deleted",type:"succ"}),setTimeout((function(){B({message:null,type:null})}),5e3)})),r(n.filter((function(t){return t.id!==e}))),p(d.filter((function(t){return t.id!==e}))))}}))};n(37);c.a.render(u.a.createElement(v,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.8835d88a.chunk.js.map